<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cheeki's Mods Archive</title>
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white font-sans p-4 min-h-screen flex flex-col">
  <div class="max-w-6xl mx-auto flex-1">
    <h1 class="text-3xl font-bold mb-1">Cheeki's Mods Archive</h1>
    <h2 class="text-lg text-gray-400 mb-3">A collection of S.T.A.L.K.E.R. Story Mods</h2>
    <p class="text-gray-300 text-sm mb-6">
      A non-exhaustive archive of game modifications for the S.T.A.L.K.E.R. game franchise, mainly story-focused mods I reviewed on the YouTube Channel.
      Everything listed here is for ease-of-access and posterity only. Consolidating files that tend to be scattered across multiple websites, hosting services, 
      obscure discord servers, and with some unfortunately lost already. All credits go to the Authors and creators of these mods.
    </p>
    
    <!-- Responsive Grid -->
    <div id="mod-list" class="grid gap-4 grid-cols-[repeat(auto-fit,minmax(250px,1fr))]"></div>
  </div>

  <!-- Footer -->
  <footer class="mt-8 text-center text-sm text-gray-500">
    Cheeki's Mods Archive 2025 - <a href="https://linktr.ee/cheekibreekii" target="_blank" class="text-blue-400 hover:underline">Check me Out!</a>
  </footer>

  <script>
    async function loadMods() {
      try {
        const response = await fetch('mods.json?nocache=' + new Date().getTime());
        const mods = await response.json();
        const container = document.getElementById('mod-list');
        
        mods.forEach(mod => {
          const card = document.createElement('div');
          card.className = 'bg-gray-800 p-3 rounded-md shadow-sm flex flex-col h-full';

          const titleRow = document.createElement('div');
          titleRow.className = 'flex justify-between items-center mb-1';

          const title = document.createElement('h3');
          title.className = 'text-lg font-semibold';
          title.textContent = mod.title;

          const rating = document.createElement('div');
          rating.className = 'flex items-center space-x-0.5 text-yellow-400';
          const stars = renderStars(mod.rating || 0);
          rating.innerHTML = stars;

          titleRow.appendChild(title);
          titleRow.appendChild(rating);

          const desc = document.createElement('p');
          desc.className = 'text-gray-400 mb-1 text-sm';
          desc.textContent = mod.description;

          const links = document.createElement('div');
          links.className = 'mb-2';
          (mod.links || []).forEach(link => {
            const a = document.createElement('a');
            a.href = link.url;
            a.textContent = link.label;
            a.className = 'block text-blue-400 hover:underline text-sm';
            a.target = '_blank';
            links.appendChild(a);
          });

          card.appendChild(titleRow);
          card.appendChild(desc);
          card.appendChild(links);

          if (mod.video) {
            const video = document.createElement('iframe');
            video.src = mod.video;
            video.className = 'w-full aspect-video mt-auto rounded';
            video.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';
            video.allowFullscreen = true;
            card.appendChild(video);
          }

          container.appendChild(card);
        });
      } catch (err) {
        console.error('Error loading mods.json:', err);
        const container = document.getElementById('mod-list');
        container.innerHTML = '<p class="text-red-400">Failed to load mod list.</p>';
      }
    }

    function renderStars(rating) {
      const fullStar = '<svg class="w-4 h-4 fill-current" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.122-6.545L.487 6.91l6.561-.955L10 0l2.952 5.955 6.561.955-4.757 4.635 1.122 6.545z"/></svg>';
      const halfStar = `
        <svg class="w-4 h-4" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
          <defs>
            <linearGradient id="halfGrad" x1="0" x2="100%" y1="0" y2="0">
              <stop offset="50%" stop-color="#facc15"/>
              <stop offset="50%" stop-color="#4b5563"/>
            </linearGradient>
          </defs>
          <path fill="url(#halfGrad)" d="M10 15l-5.878 3.09 1.122-6.545L.487 6.91l6.561-.955L10 0l2.952 5.955 6.561.955-4.757 4.635 1.122 6.545z"/>
        </svg>`;
      const emptyStar = '<svg class="w-4 h-4 fill-gray-600" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.122-6.545L.487 6.91l6.561-.955L10 0l2.952 5.955 6.561.955-4.757 4.635 1.122 6.545z"/></svg>';

      let stars = '';
      for (let i = 1; i <= 5; i++) {
        if (rating >= i) {
          stars += fullStar;
        } else if (rating >= i - 0.5) {
          stars += halfStar;
        } else {
          stars += emptyStar;
        }
      }
      return stars;
    }

    loadMods();
  </script>
</body>
</html>
